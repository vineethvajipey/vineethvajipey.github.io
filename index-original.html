<!DOCTYPE html>
<html>
  <head>
    <title>Vineeth Vajipey</title>
    <link rel="icon" type="image/gif" href="images/skele-head.gif" />
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      html,
      body {
        cursor: url("images/cursor-main.png") 0 0, auto;
      }

      a,
      a:link,
      a:visited {
        cursor: url("images/cursor-main.png") 0 0, pointer;
      }

      a:hover,
      a:hover *,
      .section-content a:hover,
      .section-content a:hover * {
        cursor: url("images/cursor-hover.png") 0 0, pointer !important;
      }

      a:active,
      *:active {
        cursor: url("images/cursor-special.png") 0 0, pointer !important;
      }

      html {
        height: 100%;
        width: 100%;
        background-color: black;
        /* scroll-behavior handled by JS for better control */
      }

      body {
        width: 100%;
        overflow-x: hidden;
        overflow-y: auto;
      }

      /* Section layouts */
      .section-content {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        padding-left: 10vw;
        padding-right: 10vw;
        z-index: 5;
      }

      .skeleton-img {
        height: 53vh;
        max-width: 70vw;
        padding-right: 10vw;
        padding-left: 5vw;
      }

      .bg-section {
        height: 100vh;
        width: 100%;
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        position: relative;
      }

      .bg-section::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.4);
        z-index: 1;
      }

      /* Dharma Chakra Wheel */
      .dharma-wheel-container {
        position: fixed;
        bottom: 2rem;
        right: 2rem;
        z-index: 20;
        cursor: url("images/cursor-hover.png") 0 0, grab;
        background: none;
        border: none;
        padding: 0;
        outline: none;
        touch-action: none;
        user-select: none;
      }

      .dharma-wheel-container:active {
        cursor: url("images/cursor-special.png") 0 0, grabbing;
      }

      .dharma-wheel {
        width: 70px;
        height: 70px;
        transition: transform 0.1s ease-out;
        filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.3));
      }

      .dharma-wheel:hover {
        filter: drop-shadow(0 0 15px rgba(255, 255, 255, 0.5));
      }

      /* Spin animation now handled in JavaScript for smooth scroll integration */

      /* Orbit animation styles */
      .orbit-container {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        display: grid;
        place-items: center;
        z-index: 5;
      }

      .orbit-content {
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .orbit-wrap {
        aspect-ratio: 1 / 1;
      }

      .orbit-wrap svg {
        width: 100%;
        height: 100%;
        display: block;
      }

      .orbit-skull {
        margin-top: -8.75rem;
        max-height: 700px;
        filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.4));
      }

      .orbit-back,
      .orbit-front {
        fill: none;
        stroke: rgba(255, 255, 255, 0.6);
        stroke-width: 1.5;
        vector-effect: non-scaling-stroke;
      }

      .spoke {
        stroke: rgba(255, 255, 255, 0.35);
        stroke-width: 1;
        vector-effect: non-scaling-stroke;
      }

      .planet {
        fill: #fff;
      }
      .moon {
        fill: #fff;
      }

      /* First section: skeleton with orbit above */
      .skeleton-with-orbit {
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .skeleton-with-orbit .orbit-wrap {
        width: min(200px, 35vw);
        margin-bottom: -3rem;
        margin-left: -11rem;
      }

      /* Second section orbit */
      .second-section .orbit-wrap {
        width: min(500px, 75vw);
      }

      .second-section .orbit-content {
        margin-top: 16rem;
      }

      /* Hero content that transforms into header */
      .hero-content {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding-left: 10vw;
        padding-right: 10vw;
        z-index: 50;
        pointer-events: none;
      }

      .hero-inner {
        display: flex;
        align-items: center;
        transform-origin: center center;
        will-change: transform;
      }

      .hero-skeleton-wrap {
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .hero-skeleton-wrap .orbit-wrap {
        width: min(200px, 35vw);
        margin-bottom: -3rem;
        margin-left: -11rem;
      }

      .hero-skeleton-wrap .skeleton-img {
        height: 53vh;
        max-width: 70vw;
        padding-right: 10vw;
        padding-left: 5vw;
      }

      .hero-name-wrap {
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      /* Social links - connected white balls */
      .social-links {
        display: flex;
        align-items: center;
        margin-top: 1.5rem;
        pointer-events: auto;
      }

      .social-link {
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
        text-decoration: none;
      }

      .social-ball {
        width: 32px;
        height: 32px;
        background: #fff;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
      }

      .social-ball svg {
        width: 16px;
        height: 16px;
        fill: #000;
      }

      .social-link:hover .social-ball {
        transform: scale(1.15);
        box-shadow: 0 0 15px rgba(255, 255, 255, 0.5);
      }

      .social-connector {
        width: 50px;
        height: 1px;
        background: rgba(255, 255, 255, 0.5);
      }

      .social-label {
        position: absolute;
        bottom: calc(100% + 8px);
        left: 50%;
        transform: translateX(-50%);
        background: rgba(0, 0, 0, 0.8);
        color: white;
        padding: 4px 10px;
        border-radius: 4px;
        font-size: 11px;
        font-family: system-ui, -apple-system, sans-serif;
        letter-spacing: 0.5px;
        white-space: nowrap;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.2s ease, transform 0.2s ease;
        transform: translateX(-50%) translateY(4px);
      }

      .social-link:hover .social-label {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
      }

      .social-label::after {
        content: "";
        position: absolute;
        top: 100%;
        left: 50%;
        transform: translateX(-50%);
        border: 4px solid transparent;
        border-top-color: rgba(0, 0, 0, 0.8);
      }
    </style>
  </head>
  <body>
    <!-- Dharma Wheel Navigation -->
    <button
      class="dharma-wheel-container"
      aria-label="Spin wheel to next background"
    >
      <svg class="dharma-wheel" id="dharmaWheel" viewBox="0 0 100 100">
        <circle
          cx="50"
          cy="50"
          r="42"
          fill="none"
          stroke="rgba(230, 230, 230, 0.9)"
          stroke-width="1.5"
        />
        <circle cx="50" cy="50" r="5" fill="rgba(230, 230, 230, 0.9)" />
        <line
          x1="50"
          y1="50"
          x2="50"
          y2="8"
          stroke="rgba(230, 230, 230, 0.9)"
          stroke-width="1"
        />
        <line
          x1="50"
          y1="50"
          x2="79.7"
          y2="20.3"
          stroke="rgba(230, 230, 230, 0.9)"
          stroke-width="1"
        />
        <line
          x1="50"
          y1="50"
          x2="92"
          y2="50"
          stroke="rgba(230, 230, 230, 0.9)"
          stroke-width="1"
        />
        <line
          x1="50"
          y1="50"
          x2="79.7"
          y2="79.7"
          stroke="rgba(230, 230, 230, 0.9)"
          stroke-width="1"
        />
        <line
          x1="50"
          y1="50"
          x2="50"
          y2="92"
          stroke="rgba(230, 230, 230, 0.9)"
          stroke-width="1"
        />
        <line
          x1="50"
          y1="50"
          x2="20.3"
          y2="79.7"
          stroke="rgba(230, 230, 230, 0.9)"
          stroke-width="1"
        />
        <line
          x1="50"
          y1="50"
          x2="8"
          y2="50"
          stroke="rgba(230, 230, 230, 0.9)"
          stroke-width="1"
        />
        <line
          x1="50"
          y1="50"
          x2="20.3"
          y2="20.3"
          stroke="rgba(230, 230, 230, 0.9)"
          stroke-width="1"
        />
        <circle cx="50" cy="8" r="6" fill="rgba(230, 230, 230, 0.9)" />
        <circle cx="79.7" cy="20.3" r="6" fill="rgba(230, 230, 230, 0.9)" />
        <circle cx="92" cy="50" r="6" fill="rgba(230, 230, 230, 0.9)" />
        <circle cx="79.7" cy="79.7" r="6" fill="rgba(230, 230, 230, 0.9)" />
        <circle cx="50" cy="92" r="6" fill="rgba(230, 230, 230, 0.9)" />
        <circle cx="20.3" cy="79.7" r="6" fill="rgba(230, 230, 230, 0.9)" />
        <circle cx="8" cy="50" r="6" fill="rgba(230, 230, 230, 0.9)" />
        <circle cx="20.3" cy="20.3" r="6" fill="rgba(230, 230, 230, 0.9)" />
      </svg>
    </button>

    <!-- Hero content that transforms into sticky header -->
    <div class="hero-content" id="heroContent">
      <div class="hero-inner" id="heroInner">
        <div class="hero-skeleton-wrap">
          <div class="orbit-wrap" id="orbit1"></div>
          <img
            src="images/skele-bod.gif"
            alt="skeleton"
            class="skeleton-img"
            id="heroSkeleton"
          />
        </div>
        <div class="hero-name-wrap">
          <img src="images/vineeth-name.png" alt="Vineeth" id="heroName" />
          <div class="social-links">
            <a
              href="https://github.com/vineethvajipey"
              class="social-link"
              target="_blank"
            >
              <span class="social-ball">
                <svg viewBox="0 0 24 24">
                  <path
                    d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"
                  />
                </svg>
              </span>
              <span class="social-label">GitHub</span>
            </a>
            <div class="social-connector"></div>
            <a
              href="https://www.linkedin.com/in/vineeth-vajipey/"
              class="social-link"
              target="_blank"
            >
              <span class="social-ball">
                <svg viewBox="0 0 24 24">
                  <path
                    d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"
                  />
                </svg>
              </span>
              <span class="social-label">LinkedIn</span>
            </a>
            <div class="social-connector"></div>
            <a
              href="https://devpost.com/VineethVajipey"
              class="social-link"
              target="_blank"
            >
              <span class="social-ball">
                <svg viewBox="0 0 24 24">
                  <path
                    d="M6.002 1.61L0 12.004L6.002 22.39h11.996L24 12.004L17.998 1.61H6.002zm1.593 4.084h3.947c3.605 0 6.276 1.695 6.276 6.31 0 4.436-3.21 6.302-6.456 6.302H7.595V5.694zm2.517 2.449v7.714h1.241c2.646 0 3.862-1.55 3.862-3.861.009-2.569-1.096-3.853-3.767-3.853H10.112z"
                  />
                </svg>
              </span>
              <span class="social-label">Devpost</span>
            </a>
            <div class="social-connector"></div>
            <a
              href="https://scholar.google.com/citations?user=xiKrcQgAAAAJ&hl=en&oi=ao"
              class="social-link"
              target="_blank"
            >
              <span class="social-ball">
                <svg viewBox="0 0 24 24">
                  <path
                    d="M5.242 13.769L0 9.5 12 0l12 9.5-5.242 4.269C17.548 11.249 14.978 9.5 12 9.5c-2.977 0-5.548 1.748-6.758 4.269zM12 10a7 7 0 1 0 0 14 7 7 0 0 0 0-14z"
                  />
                </svg>
              </span>
              <span class="social-label">Scholar</span>
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- Section 1: First background -->
    <div
      class="bg-section"
      id="heroSection"
      style="background-image: url('images/backgrounds/hill.jpg')"
    ></div>

    <!-- Section 2: Background transition -->
    <div
      class="bg-section"
      style="background-image: url('images/backgrounds/flow.JPG')"
    ></div>

    <!-- Section 3: Orbit with skull -->
    <div
      class="bg-section second-section"
      style="background-image: url('images/backgrounds/goons.JPG')"
    >
      <div class="orbit-container">
        <div class="orbit-content">
          <div class="orbit-wrap" id="orbit2"></div>
          <img
            src="images/skele-head.gif"
            alt="skeleton head"
            class="orbit-skull"
          />
        </div>
      </div>
    </div>
    <div
      class="bg-section"
      style="background-image: url('images/backgrounds/gothic.JPG')"
    ></div>
    <div
      class="bg-section"
      style="background-image: url('images/backgrounds/brozas.JPG')"
    ></div>

    <script>
      /**
       * OrbitWheel - Creates an animated orbit with moons and spokes
       */
      class OrbitWheel {
        constructor(container, options = {}) {
          this.config = {
            a: options.a || 140, // x-radius
            b: options.b || 18, // y-radius (flat for edge-on)
            speed: options.speed || 0.6, // radians/sec
            planetR: options.planetR || 16,
            moonBaseR: options.moonBaseR || 7,
            moonCount: options.moonCount || 8,
            startAngle: options.startAngle || 0,
          };

          this.container = container;
          this.t = this.config.startAngle;
          this.lastTime = performance.now();

          this.createSVG();
          this.animate = this.animate.bind(this);
          requestAnimationFrame(this.animate);
        }

        createSVG() {
          const { a, b, planetR, moonCount } = this.config;
          const ns = "http://www.w3.org/2000/svg";

          // Create SVG
          this.svg = document.createElementNS(ns, "svg");
          this.svg.setAttribute("viewBox", "-200 -200 400 400");
          this.svg.setAttribute("aria-label", "Orbit animation");

          // Back orbit path
          this.orbitBack = document.createElementNS(ns, "path");
          this.orbitBack.classList.add("orbit-back");
          this.svg.appendChild(this.orbitBack);

          // Spokes (half of moon count, connecting opposites)
          this.spokes = [];
          for (let i = 0; i < moonCount / 2; i++) {
            const spoke = document.createElementNS(ns, "line");
            spoke.classList.add("spoke");
            this.spokes.push(spoke);
            this.svg.appendChild(spoke);
          }

          // Back moons
          this.moons = [];
          for (let i = 0; i < moonCount; i++) {
            const moonBack = document.createElementNS(ns, "circle");
            moonBack.classList.add("moon");
            this.svg.appendChild(moonBack);
            this.moons.push({
              back: moonBack,
              front: null,
              offset: (i * Math.PI * 2) / moonCount,
            });
          }

          // Planet
          this.planet = document.createElementNS(ns, "circle");
          this.planet.classList.add("planet");
          this.planet.setAttribute("r", planetR);
          this.planet.setAttribute("cx", 0);
          this.planet.setAttribute("cy", 0);
          this.svg.appendChild(this.planet);

          // Front orbit path
          this.orbitFront = document.createElementNS(ns, "path");
          this.orbitFront.classList.add("orbit-front");
          this.svg.appendChild(this.orbitFront);

          // Front moons
          for (let i = 0; i < moonCount; i++) {
            const moonFront = document.createElementNS(ns, "circle");
            moonFront.classList.add("moon");
            this.moons[i].front = moonFront;
            this.svg.appendChild(moonFront);
          }

          // Set orbit paths
          this.orbitFront.setAttribute("d", this.arcPath(0, Math.PI));
          this.orbitBack.setAttribute("d", this.arcPath(Math.PI, Math.PI * 2));

          this.container.appendChild(this.svg);
        }

        pt(t) {
          return {
            x: this.config.a * Math.cos(t),
            y: this.config.b * Math.sin(t),
          };
        }

        arcPath(t0, t1) {
          const { a, b } = this.config;
          const p0 = this.pt(t0);
          const p1 = this.pt(t1);
          let delta = t1 - t0;
          while (delta < 0) delta += Math.PI * 2;
          while (delta >= Math.PI * 2) delta -= Math.PI * 2;
          const largeArc = delta > Math.PI ? 1 : 0;
          return `M ${p0.x.toFixed(3)} ${p0.y.toFixed(
            3
          )} A ${a} ${b} 0 ${largeArc} 1 ${p1.x.toFixed(3)} ${p1.y.toFixed(3)}`;
        }

        // Trigger a fast spin burst
        triggerSpin(duration = 700) {
          this.spinBoost = 15; // Extra speed multiplier
          this.spinBoostDecay = this.spinBoost / (duration / 16); // Decay per frame
        }

        // Add rotation based on scroll delta
        addScrollRotation(delta) {
          this.t += delta * 0.003; // Convert scroll pixels to radians
        }

        animate(now) {
          const { a, b, speed, moonBaseR } = this.config;
          const dt = (now - this.lastTime) / 1000;
          this.lastTime = now;

          // Apply spin boost if active
          let currentSpeed = speed;
          if (this.spinBoost > 0) {
            currentSpeed += this.spinBoost;
            this.spinBoost = Math.max(0, this.spinBoost - this.spinBoostDecay);
          }

          this.t += currentSpeed * dt;

          const positions = [];

          // Update moons
          for (let i = 0; i < this.moons.length; i++) {
            const moon = this.moons[i];
            const angle = this.t + moon.offset;
            const x = a * Math.cos(angle);
            const y = b * Math.sin(angle);
            positions[i] = { x, y };

            // Depth scaling
            const depth = (y + b) / (2 * b);
            const scale = 0.45 + depth * 0.75;
            const r = moonBaseR * scale;
            const behind = y < 0;

            // Update both layers
            [moon.back, moon.front].forEach((el) => {
              el.setAttribute("cx", x);
              el.setAttribute("cy", y);
              el.setAttribute("r", r);
            });

            moon.back.style.display = behind ? "block" : "none";
            moon.front.style.display = behind ? "none" : "block";
          }

          // Update spokes
          const halfCount = this.moons.length / 2;
          for (let i = 0; i < this.spokes.length; i++) {
            const p1 = positions[i];
            const p2 = positions[i + halfCount];
            this.spokes[i].setAttribute("x1", p1.x);
            this.spokes[i].setAttribute("y1", p1.y);
            this.spokes[i].setAttribute("x2", p2.x);
            this.spokes[i].setAttribute("y2", p2.y);
          }

          requestAnimationFrame(this.animate);
        }
      }

      // Initialize orbit wheels (store orbit1 globally for triggering spin)
      const orbit1 = new OrbitWheel(document.getElementById("orbit1"), {
        startAngle: 0,
      });
      const orbit2 = new OrbitWheel(document.getElementById("orbit2"), {
        startAngle: Math.PI / 8,
      });

      // Make orbit1 accessible for the dharma wheel click
      window.orbit1 = orbit1;
    </script>

    <script>
      // Scroll navigation
      let currentSection = 0;
      let isAnimating = false;

      function spinAndScroll() {
        if (isAnimating) return;
        isAnimating = true;

        const sections = document.querySelectorAll(".bg-section");
        currentSection = (currentSection + 1) % sections.length;

        // Trigger the dharma wheel spin
        if (window.triggerDharmaWheelSpin) {
          window.triggerDharmaWheelSpin();
        }

        // Trigger the orbit wheel to spin fast too!
        if (window.orbit1) {
          window.orbit1.triggerSpin(800);
        }

        const targetY = sections[currentSection].offsetTop;
        smoothScrollTo(targetY, 800);

        setTimeout(() => {
          isAnimating = false;
        }, 850);
      }

      // Scroll-based rotation for dharma wheel + click spin
      (function () {
        const dharmaWheel = document.getElementById("dharmaWheel");
        let totalRotation = 0;
        let lastScrollY = window.scrollY;
        let spinVelocity = 0;
        let ticking = false;

        function updateWheelRotation() {
          const scrollY = window.scrollY;
          const scrollDelta = scrollY - lastScrollY;
          lastScrollY = scrollY;

          // Add rotation based on scroll (1 degree per 3 pixels scrolled)
          totalRotation += scrollDelta * 0.33;

          // Also spin the orbit wheel above the skeleton
          if (window.orbit1) {
            window.orbit1.addScrollRotation(scrollDelta);
          }

          // Add spin velocity (from click)
          if (spinVelocity > 0) {
            totalRotation += spinVelocity;
            spinVelocity *= 0.92; // Decay
            if (spinVelocity < 0.5) spinVelocity = 0;
          }

          dharmaWheel.style.transform = `rotate(${totalRotation}deg)`;

          // Keep animating if there's spin velocity
          if (spinVelocity > 0) {
            requestAnimationFrame(updateWheelRotation);
          }

          ticking = false;
        }

        // Expose function to trigger spin from click
        window.triggerDharmaWheelSpin = function () {
          spinVelocity = 25; // Initial spin speed
          if (!ticking) {
            requestAnimationFrame(updateWheelRotation);
            ticking = true;
          }
        };

        window.addEventListener(
          "scroll",
          function () {
            if (!ticking) {
              requestAnimationFrame(updateWheelRotation);
              ticking = true;
            }
          },
          { passive: true }
        );
      })();

      function smoothScrollTo(targetY, duration) {
        const startY = window.pageYOffset;
        const difference = targetY - startY;
        const startTime = performance.now();

        // Simple ease-in-out-sine: smooth start, smooth end, very natural
        function easeInOutSine(t) {
          return -(Math.cos(Math.PI * t) - 1) / 2;
        }

        function step(currentTime) {
          const elapsed = currentTime - startTime;
          const progress = Math.min(elapsed / duration, 1);
          const easedProgress = easeInOutSine(progress);

          window.scrollTo(0, startY + difference * easedProgress);

          if (progress < 1) {
            requestAnimationFrame(step);
          }
        }

        requestAnimationFrame(step);
      }

      // Track visible section
      const observer = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting && entry.intersectionRatio > 0.5) {
              const sections = document.querySelectorAll(".bg-section");
              currentSection = Array.from(sections).indexOf(entry.target);
            }
          });
        },
        { threshold: 0.5 }
      );

      document
        .querySelectorAll(".bg-section")
        .forEach((section) => observer.observe(section));
    </script>

    <!-- Interact.js for drag functionality -->
    <script src="https://cdn.jsdelivr.net/npm/interactjs/dist/interact.min.js"></script>
    <script>
      let hasDragged = false;

      interact(".dharma-wheel-container")
        .draggable({
          inertia: true,
          modifiers: [
            interact.modifiers.restrictRect({
              restriction: "body",
              endOnly: true,
            }),
          ],
          listeners: {
            start() {
              hasDragged = false;
            },
            move(event) {
              const target = event.target;
              const x =
                (parseFloat(target.getAttribute("data-x")) || 0) + event.dx;
              const y =
                (parseFloat(target.getAttribute("data-y")) || 0) + event.dy;

              if (Math.abs(event.dx) > 2 || Math.abs(event.dy) > 2)
                hasDragged = true;

              target.style.transform = `translate(${x}px, ${y}px)`;
              target.setAttribute("data-x", x);
              target.setAttribute("data-y", y);
            },
          },
        })
        .on("tap", () => {
          if (!hasDragged) spinAndScroll();
          hasDragged = false;
        });
    </script>

    <!-- Scroll-based scaling and position transition -->
    <script>
      (function () {
        const heroInner = document.getElementById("heroInner");

        // Configuration
        const MIN_SCALE = 0.2; // 20% of original size
        const FINAL_TOP_PERCENT = 8; // Final position: 8% from top of viewport
        const TRANSITION_DISTANCE = window.innerHeight * 0.85; // Complete transition over 85% of first viewport

        let ticking = false;

        function updateOnScroll() {
          const scrollY = window.scrollY;
          const viewportHeight = window.innerHeight;

          // Calculate progress (0 to 1)
          const progress = Math.min(scrollY / TRANSITION_DISTANCE, 1);

          // Exponential easing - shrinks quickly at first, then slows down
          const easeOutExpo = (t) => (t === 1 ? 1 : 1 - Math.pow(2, -10 * t));
          const easedProgress = easeOutExpo(progress);

          // Calculate scale (1 -> MIN_SCALE)
          const scale = 1 - easedProgress * (1 - MIN_SCALE);

          // Calculate Y translation
          // Start: center of viewport (0 translateY since container uses flexbox center)
          // End: move up so the element's center is at FINAL_TOP_PERCENT of viewport
          // The center starts at 50% (50vh), needs to move to FINAL_TOP_PERCENT
          const startPercent = 50;
          const currentPercent =
            startPercent - (startPercent - FINAL_TOP_PERCENT) * easedProgress;
          const translateY =
            ((currentPercent - startPercent) * viewportHeight) / 100;

          // Apply transform - scale first (around center), then translate
          heroInner.style.transform = `translateY(${translateY}px) scale(${scale})`;

          ticking = false;
        }

        function onScroll() {
          if (!ticking) {
            requestAnimationFrame(updateOnScroll);
            ticking = true;
          }
        }

        window.addEventListener("scroll", onScroll, { passive: true });
        window.addEventListener("resize", updateOnScroll);

        // Initial call
        updateOnScroll();
      })();
    </script>
  </body>
</html>
